import csv
from parse import parse

map = [
    '...#.....#.......##......#.....',
    '...#..................#........',
    '....##....#.......#............',
    '.........#.......#.......#.....',
    '..#..............#.........#..#',
    '.....#.........#....#....#....#',
    '....##..........#.#.##.........',
    '...#....##...#...#...#.#..#....',
    '...#.......###..........#......',
    '.........#.....#....#...#.#....',
    '.#...###..#..##..#.........###.',
    '#.#...#..........###...#....#..',
    '#....#.#..#..........#.......#.',
    '.#..#........##.#..............',
    '............#..#.#............#',
    '.............#..........#......',
    '...#.......#...............#...',
    '.#...#..#..#............#..#...',
    '....##.##..................#.##',
    '#......#...#..##....#.....#...#',
    '#..#..........##....#...###....',
    '##......#.##.#......#..#......#',
    '....#...#.......##.##...#.#..#.',
    '##.#...#....#...#...#........#.',
    '........#..#.....#....#.......#',
    '.#......#......#..............#',
    '.#.....#..#..#..#..#..#....#..#',
    '.......#.....#.................',
    '.#......#...#..#..#...#...#....',
    '.........#..#..#.........#.....',
    '.....#.........#.#..........#..',
    '#......#....#....##....#.#.#...',
    '................##.#...........',
    '.....##.....#............#.#...',
    '...........#...#.#..##...#.....',
    '.......#....##.......#..#....#.',
    '.##......##....#....####.##..#.',
    '.....#.##.....#...#....##......',
    '.............#....#......#....#',
    '#.#.#.###........#.#....#.#....',
    '.##...........#................',
    '#..#..#...##..##.##...#..#.#...',
    '..#......##..#.#......#..#.#.#.',
    '.....#..............#......#...',
    '#.#..##.##...#............##...',
    '.#......#.............#........',
    '........##....#......#..#......',
    '##.........##....#..........#..',
    '..#..#....#.........##....#..#.',
    '........#..#..#........#...#...',
    '#.........#......##.#...#.##...',
    '.##.............#..###....#.##.',
    '.##.#....#.......#.............',
    '#..##.#.........#..##.#......##',
    '....#..#.......................',
    '.#.#.........#...............#.',
    '....#......#.#..##..#...#.#..#.',
    '#....##...##..#.......##.....##',
    '....##...##...#....#.....#..#..',
    '.#......#.#.#.#......##..#..#..',
    '.....##..#..#.....#.....#...##.',
    '....###................#..#.#..',
    '.....#..#..#.#..........#..#...',
    '...#.....#............#........',
    '#.............#...#..#.....#..#',
    '#........#.....#.#..#......#...',
    '...#.##.....#.#..#.........#..#',
    '.......##...#..#.#....##.......',
    '..................#..##..#.#.#.',
    '..#......#..#..#.....#...#.#...',
    '.#.......#.....#.#....#.#......',
    '##..#.#....#.###..#...#.......#',
    '.......................#.......',
    '..###..........#..##.##.#...##.',
    '.....#...#....###.........#..#.',
    '..#.....#....###...............',
    '....#.......#........#....#..#.',
    '......#................#.#...##',
    '#.....#.......#..#..........##.',
    '#.#....##.........#.....#.#....',
    '#.#.#...#............####.##..#',
    '.....#....####........#...#..#.',
    '....##........#.#..............',
    '.#......#..#..##......#....#.##',
    '..#....#.#........#..#....#....',
    '.#...#.##...#.#.....#.....#...#',
    '..........#................###.',
    '.....#..........##..#..........',
    '.....#..................#...#..',
    '#......##....#.#...#..#.......#',
    '..#......##....#......#.#...#..',
    '###.#..###.#.#..#...#....#.....',
    '#.....#.#...#.##...#........#..',
    '#..........................#...',
    '.#.#.....#.#.#.......##.#.#....',
    '.#....#..##......#....#........',
    '.#.......#.##......#.#..#......',
    '............#.....#....##.##...',
    '....##........##......#........',
    '....#......##....##.....#......',
    '..#.#.....#......#...#.#.......',
    '.###.........#...#........#....',
    '......#.#...##.....##..##..#...',
    '...#...#.#......#..##..#.......',
    '.##....#.#........#.#..........',
    '#....#.#......#......#.#.#.....',
    '#.....#.....#................##',
    '...........#....#...#...#......',
    '..........##..##..#...##.......',
    '.##......#.......#..#.#..##....',
    '..........##....#....#..#.#....',
    '...............#......#.....##.',
    '.#...#....................#..#.',
    '.............###...............',
    '.####..............#...#.......',
    '....#...#.#...#...#....#.......',
    '.......#.#.....................',
    '...............................',
    '#..#.........##.......#.#.#....',
    '....##...#...........#......#..',
    '........##...#......#..........',
    '....#.#.....#..#......#........',
    '#..#................#..#.##....',
    '.#........#.......#.........##.',
    '#...........#...#...#......#.#.',
    '..#.#.#..........##.##...#...#.',
    '..#...#.##...#.#...........#...',
    '##...........##...##...##......',
    '....#....##...#......#..#.....#',
    '#..#.#.#..#...#...#....#.......',
    '............#.....#....#....#.#',
    '....##.....#.........#......#..',
    '.....##.......#...#...#.###....',
    '...##......##..###.#.#....#....',
    '#.#.#.#..#.#.........#...#...##',
    '..#..........#.................',
    '....##....#....................',
    '###.#...............##...##.#..',
    '....#.......##.#..#.#..........',
    '............##..#.......##.....',
    '#...#.........#..#..#..#...#...',
    '..#......##..#.#...##.#.......#',
    '......#................#...#...',
    '......#..###............#.#....',
    '..#.#...###...#..#...#......##.',
    '...#.##...##............#......',
    '#...##........#.#..#.......#...',
    '#..#.....#..#.##...............',
    '..#.....#.#....#.........#.....',
    '.............#....#..#...#.##..',
    '..#.#.....................##.#.',
    '........#.......#..#.#.........',
    '##..............#.....#.......#',
    '.#.##...###....#.....#..##.#...',
    '#..#...#..#......#..........###',
    '#...........#..#...#....#....#.',
    '....#..#.......##......#......#',
    '#...#.#...............##...#...',
    '...##.#..##.......##..#........',
    '...........##..........#.......',
    '..#....#..##...#......#.#......',
    '.#.#....#.#.#...#.#............',
    '.#.#..#...##.......#.#.........',
    '...#...#.............#.######..',
    '##.#........###.......#....#.#.',
    '.#....#.....#.#........#......#',
    '..#.#.........#..........##.#..',
    '.#....#.#..............#......#',
    '.....#..##.........#..##..#....',
    '........#..#....#.......#.....#',
    '#.#.......#.....#.##.#...#....#',
    '...#...##...#....#.....#....#.#',
    '#..##....#..........#..#.......',
    '.......#.#.....#...#.#.#.....##',
    '#...#...#..#......##.#..#......',
    '...#.......#....#...........#.#',
    '##.......#####.#.........#..#..',
    '....#.#...................##...',
    '......#..##............#.......',
    '#.........#....#####.#.#..#.#..',
    '..#......#.#.##............#...',
    '..#...#.....#.#....#......#....',
    '.#...#....#....#.#.#......#.#..',
    '..#.##.....#..........#...#.#..',
    '.......#...#.............#...#.',
    '.#.........#.....#.#........##.',
    '#....#..#..........##.......##.',
    '...#....#.#.........#.......###',
    '......#....#.#......#.......#..',
    '.....#...#...#.#...##..#.#.....',
    '#.........##..#...##..#.#....#.',
    '...#......#.#......##.....#....',
    '.#####.....#.#.#.#...###.##....',
    '..#................#.#...#.#...',
    '#.......##...#.........##..#...',
    '..#.....#....##............#...',
    '#............##...............#',
    '..#..#.................#.......',
    '...............#..#.......##...',
    '..##..#....#...##..........#..#',
    '#...###....##.#.......#.....#..',
    '..........#.........#..#......#',
    '##....#.....#...##.......#.....',
    '..#..#.......#.................',
    '..#..##......#.........#......#',
    '...........##.#..#......#.#..#.',
    '..#...##...##......#...#...#.#.',
    '.#..#.....#.........#..........',
    '#..##...#............#..#.#....',
    '..#...#...##.#........#....#.#.',
    '......##..###.#....#........#..',
    '.....#..#....##...##..........#',
    '................#.#.#.....#..#.',
    '#.##...#......#.#..#.......###.',
    '.......#.#..#..#......#..##..#.',
    '.##...#...#....#....#.......#..',
    '......#..#....#.#.###.....#.#.#',
    '#....#.#...#......#.#.....#..#.',
    '.......#.#...#.#.#............#',
    '#.....#..#...#.................',
    '.....#..........#..#.#..#.#....',
    '.........#......#.#.........###',
    '..#.###........#....##.#.......',
    '.#.......#.#......#........#..#',
    '............#........#.....#...',
    '......#......#....#.#....#.....',
    '.#.......#.....#.##.#..#...#..#',
    '##.....#...#..........##..#...#',
    '.#........#....#...#....##.#...',
    '...#.#.......#.#....#.#...#...#',
    '........#.#.....#.##...#.#.#...',
    '...........#....#..#.........#.',
    '......#.#..#..##...#.......#...',
    '...#....#..#..#.##...........##',
    '.#..#.#.#......#....##...#.....',
    '......#..#........#...##.......',
    '.............#...##.#.....#...#',
    '....#...............##......#.#',
    '.#...........#.........###.##.#',
    '....##........##...#.##.....#..',
    '#......##........#...........#.',
    '###.#.................#.....#..',
    '.....##..#.........#......##.#.',
    '#.#.......##.#..#...#...#......',
    '...#.#..##.....#....##.....#.#.',
    '...##..#...#........#.#..#..#..',
    '...........#....#...#...##.....',
    '##.......#...#.#.##...##..#.#..',
    '#....#.#..##...................',
    '.#...................#.#..#....',
    '#.....#..........#..#...#...#..',
    '...#..#............#.#.........',
    '............#..##.....##......#',
    '#....#.........#.#..#..........',
    '...#.#................#....#.#.',
    '..#..#...#...#.#.#...#.#.#.....',
    '..#.......#.............##..#.#',
    '#........#.#.###.#...#..#.###..',
    '.......#......#..#.....####...#',
    '..##....#..#...................',
    '....##.#....#......#.#..#..#..#',
    '#...........##...#.#.##..###...',
    '##.##......#...........#....#..',
    '.#....#....#..#..#...##...#....',
    '...##.#.#......#...............',
    '.....##.##...#...........#.....',
    '....#...#.#.........##.#....#.#',
    '#..#...........#......#........',
    '..#..#.....#....#.##.......#..#',
    '..#.......##.....##.......#...#',
    '.#.##.#..#...............#....#',
    '.........#...........#.........',
    '..........##......#.#..........',
    '..#........###....#..#...#...#.',
    '....#.#...#.....#..#....#......',
    '..##...##...#..#..##......##..#',
    '..#..#......#....#....#...#..##',
    '...#...............#..#........',
    '....##..#...#......#........#..',
    '###.....##.......#.............',
    '.#.#.##........##..#...#.......',
    '.....###............#..#..#....',
    '.#....##.#...####........#.....',
    '............#.#.....##....#.#..',
    '....#..........#...#...........',
    '........#.#...#..##...........#',
    '#.......#..#.......###...#....#',
    '#....#..#......#.....#...##.#..',
    '..#.............#.#.###...##..#',
    '.#.#....#...#.....#...#.......#',
    '.##.#..#.........#..#......#...',
    '#....#...#......#.....#.....#..',
    '...........#....#.......##...#.',
    '#.#..##....#....#.#.......#.#..',
    '..............#.#..##.##.......',
    '....#........#......#....#.#...',
    '......#.....................#..',
    '#..##...##.....#.........#.....',
    '#.....#.....#....#...#.....#...',
    '........###...........#...#....',
    '............#.....#...##....#..',
    '.......#.......#...#.#...##....',
    '..#.#..#....#...#...#....#.....',
    '..........#.#....#....###....#.',
    '.##...#......###..#............',
    '...#...#........#....#....##...',
    '##.....#.##...#.#...........#.#',
    '..........#.#....#...##.#...#..',
    '..#....#.#...#...#....#.###....',
    '......#.##..#..#.........#.###.',
    '#.#.#.....#.....##.......#.....',
    '...#..#..#....#.#....#....#....',
    '##..#.#................#......#',
    '.....#...#..#......#..####.....',
    '.....##.....#....####......#...',
    '..........##..###.#....#.....##',
    '###...#.......#......##...#....',
    '.......##...#...#..#.##.#....##',
    '.....##.....##...##.....#..#..#',
    '......#.#.....#...#....#...#...',
    '..##........#...#..............',
    '..#........#.##.........#...#..',
    '#....#....#................#...',
]

map_length = len(map[0])  # mod map_length gives next position
map_depth = len(map)


def make_step(position, direction):
    new_position = [(position[0] + direction[0]), (position[1] + direction[1]) % map_length]
    element = 'x' if new_position[0] >= map_depth else map[new_position[0]][new_position[1]]
    return [new_position, element]


def traverse_map(start, direction):
    num_trees = 0
    position = start
    while position[0] < map_depth:
        position, element = make_step(position, direction)
        if element == '#':
            num_trees = num_trees + 1

    return num_trees


directions = [
    [1, 1],
    [1, 3],
    [1, 5],
    [1, 7],
    [2, 1]
]

product = 1
for direction in directions:
    num_trees = traverse_map([0, 0], direction)
    print('Result for direction %s is %d' % (str(direction), num_trees))
    product = product * num_trees

print('\n*** Result for challenge is %d ***' % product)
